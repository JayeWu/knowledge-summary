
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="canonical" href="https://blog.csdn.net/u012124438/article/details/70537203"/> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="referrer" content="always">
    <meta name="description" content="访问者模式，是行为型设计模式之一。访问者模式是一种将数据操作与数据结构分离的设计模式，它可以算是 23 中设计模式中最复杂的一个，但它的使用频率并不是很高，大多数情况下，你并不需要使用访问者模式，但是当你一旦需要使用它时，那你就是需要使用它了。 访问者模式的基本想法是，软件系统中拥有一个由许多对象构成的、比较稳定的对象结构，这些对象的类都拥有一个 accept 方法用来接受访问者对象的访问。访问者是" />
    <meta name="keywords" content="设计模式,访问者模式" />
    <meta http-equiv="Cache-Control" content="no-siteapp" /><link rel="alternate" media="handheld" href="#" />
    <meta name="shenma-site-verification" content="5a59773ab8077d4a62bf469ab966a63b_1497598848">
    <script src="https://csdnimg.cn/release/phoenix/vendor/tingyun/tingyun-rum-blog.js"></script>

    <link href="https://csdnimg.cn/public/favicon.ico" rel="SHORTCUT ICON">
    <title>设计模式学习之访问者模式 - CSDN博客</title>
    
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-d203e77e52.min.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-8a84d6f79d.min.css">

    <script type="text/javascript">
        var username = "u012124438";
        var blog_address = "https://blog.csdn.net/u012124438";
        var static_host = "https://csdnimg.cn/release/phoenix/";
        var currentUserName = ""; 
        var isShowAds = true;
        var isOwner = false;
        var loginUrl = "https://passport.csdn.net/account/login?from=https://blog.csdn.net/u012124438/article/details/70537203"
        var blogUrl = "https://blog.csdn.net/";
        //页面皮肤样式
        var curSkin = "skin3-template";
    </script>
    <script type="text/javascript">
        // Traffic Stats of the entire Web site By baidu
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6bcd52f51e9b3dce32bec4a3997715ac";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        // Traffic Stats of the entire Web site By baidu end
    </script>
    <script src="https://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="https://csdnimg.cn/rabbit/exposure-click/main-1.0.6.js"></script>
    <!-- 新版上报 -->
    <script src="//g.csdnimg.cn/track/1.0.1/track.js" type="text/javascript"></script>
    <!-- 新版上报end -->
            <link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.3/css/sandalstrap.min.css"> 
    <style>
        .MathJax, .MathJax_Message, .MathJax_Preview{
            display: none
        }
    </style>
</head>
<body>    
    <link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
    <script id="toolbar-tpl-scriptId" src="https://csdnimg.cn/public/common/toolbar/js/content_toolbar.js" type="text/javascript" domain="https://blog.csdn.net/"></script>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging.css">
<script type="text/javascript" src="//static.mediav.com/js/mvf_news_feed.js"></script>

<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/chart-3456820cac.css" />


<header>
	<div class="container d-flex clearfix">
		<div class="title-box">
			<h1 class="title-blog">
				<a href="https://blog.csdn.net/u012124438">一个码农的博客</a>
			</h1>
			<p class="description"></p>
		</div>
		<div class="opt-box d-flex justify-content-end">
			<a class="btn btn-sm" href="https://blog.csdn.net/u012124438/rss/list">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#csdnc-rss"></use>
					</svg>RSS订阅</a>
					</div>
	</div>
</header><script src="https://dup.baidustatic.com/js/ds.js"></script>
<div class="container clearfix pt0" id="mainBox">
    <main>
        <div class="blog-content-box">
	<div class="article-title-box">
			<span class="article-type type-1 float-left">原</span>		<h1 class="title-article">设计模式学习之访问者模式</h1>
	</div>
	<div class="article-info-box">
		<div class="article-bar-top d-flex">
												<span class="time">2017年04月23日 22:15:52</span>
			<div class="float-right">
				<span class="read-count">阅读数：13646</span>
											</div>
		</div>
	</div>
	<article>
		<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog"  data-mod=popu_307  data-dsm = "post" >
                    <div class="markdown_views">
                <p>访问者模式，是行为型设计模式之一。访问者模式是一种将数据操作与数据结构分离的设计模式，它可以算是 23 中设计模式中最复杂的一个，但它的使用频率并不是很高，大多数情况下，你并不需要使用访问者模式，但是当你一旦需要使用它时，那你就是需要使用它了。 </p>

<p>访问者模式的基本想法是，软件系统中拥有一个由许多对象构成的、比较稳定的对象结构，这些对象的类都拥有一个 accept 方法用来接受访问者对象的访问。访问者是一个接口，它拥有一个 visit 方法，这个方法对访问到的对象结构中不同类型的元素做出不同的处理。在对象结构的一次访问过程中，我们遍历整个对象结构，对每一个元素都实施 accept 方法，在每一个元素的 accept 方法中会调用访问者的 visit 方法，从而使访问者得以处理对象结构的每一个元素，我们可以针对对象结构设计不同的访问者类来完成不同的操作，达到区别对待的效果。 </p>



<h2 id="定义及使用场景"><strong>定义及使用场景</strong></h2>

<p>定义：封装一些作用于某种数据结构中的各元素的操作，它可以在不改变这个数据结构的前提下定义作用于这些元素的新的操作。</p>

<p>可以对定义这么理解：<strong>有这么一个操作，它是作用于一些元素之上的，而这些元素属于某一个对象结构。同时这个操作是在不改变各元素类的前提下，在这个前提下定义新操作是访问者模式精髓中的精髓。</strong></p>

<p>使用场景： <br>
（1）对象结构比较稳定，但经常需要在此对象结构上定义新的操作。</p>

<p>（2）需要对一个对象结构中的对象进行很多不同的且不相关的操作，而需要避免这些操作“污染”这些对象的类，也不希望在增加新操作时修改这些类。</p>

<h2 id="uml图"><strong>UML图</strong></h2>

<p><img src="https://img-blog.csdn.net/20170423182541900?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjEyNDQzOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p>

<p>（1）Visitor：接口或者抽象类，它定义了对每一个元素（Element）访问的行为，它的参数就是可以访问的元素，它的方法数理论上来讲与元素个数是一样的，因此，访问者模式要求元素的类族要稳定，如果经常添加、移除元素类，必然会导致频繁地修改Visitor接口，如果这样则不适合使用访问者模式。</p>

<p>（2）ConcreteVisitor1、ConcreteVisitor2：具体的访问类，它需要给出对每一个元素类访问时所产生的具体行为。</p>

<p>（3）Element：元素接口或者抽象类，它定义了一个接受访问者的方法（Accept），其意义是指每一个元素都要可以被访问者访问。</p>

<p>（4）ConcreteElementA、ConcreteElementB：具体的元素类，它提供接受访问方法的具体实现，而这个具体的实现，通常情况下是使用访问者提供的访问该元素类的方法。</p>

<p>（5）ObjectStructure：定义当中所说的对象结构，对象结构是一个抽象表述，它内部管理了元素集合，并且可以迭代这些元素供访问者访问。</p>

<h2 id="访问者模式的简单例子"><strong>访问者模式的简单例子</strong></h2>

<p>我们都知道财务都是有账本的，这个账本就可以作为一个对象结构，而它其中的元素有两种，收入和支出，这满足我们访问者模式的要求，即元素的个数是稳定的，因为账本中的元素只能是收入和支出。</p>

<p>而查看账本的人可能有这样几种，比如老板，会计事务所的注会，财务主管，等等。而这些人在看账本的时候显然目的和行为是不同的。</p>

<p>首先我们给出单子的接口，它只有一个方法accept。</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//单个单子的接口（相当于Element）</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> Bill {

    <span class="hljs-keyword">void</span> accept(AccountBookViewer viewer);

}</code></pre>

<p>其中的方法参数AccountBookViewer是一个账本访问者接口，接下来也就是实现类，收入单子和消费单子，或者说收入和支出类。</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//消费的单子</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsumeBill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bill</span>{</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> amount;

    <span class="hljs-keyword">private</span> String item;

    <span class="hljs-keyword">public</span> <span class="hljs-title">ConsumeBill</span>(<span class="hljs-keyword">double</span> amount, String item) {
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.amount = amount;
        <span class="hljs-keyword">this</span>.item = item;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(AccountBookViewer viewer) {
        viewer.view(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getAmount</span>() {
        <span class="hljs-keyword">return</span> amount;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getItem</span>() {
        <span class="hljs-keyword">return</span> item;
    }

}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//收入单子</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IncomeBill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bill</span>{</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> amount;

    <span class="hljs-keyword">private</span> String item;

    <span class="hljs-keyword">public</span> <span class="hljs-title">IncomeBill</span>(<span class="hljs-keyword">double</span> amount, String item) {
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.amount = amount;
        <span class="hljs-keyword">this</span>.item = item;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(AccountBookViewer viewer) {
        viewer.view(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getAmount</span>() {
        <span class="hljs-keyword">return</span> amount;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getItem</span>() {
        <span class="hljs-keyword">return</span> item;
    }

}</code></pre>

<p>上面最关键的还是里面的accept方法，它直接让访问者访问自己，这相当于一次静态分派（文章最后进行解释），当然我们也可以不使用重载而直接给方法不同的名称。</p>

<p>接下来是账本访问者接口</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//账单查看者接口（相当于Visitor）</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> AccountBookViewer {

    <span class="hljs-comment">//查看消费的单子</span>
    <span class="hljs-keyword">void</span> view(ConsumeBill bill);

    <span class="hljs-comment">//查看收入的单子</span>
    <span class="hljs-keyword">void</span> view(IncomeBill bill);

}</code></pre>

<p>这两个方法是重载方法，就是在上面的元素类当中用到的，当然你也可以按照访问者模式类图当中的方式去做，将两个方法分别命名为viewConsumeBill和viewIncomeBill，而一般建议按照类图上来做的</p>

<p>访问者的实现</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//老板类，查看账本的类之一</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Boss</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AccountBookViewer</span>{</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> totalIncome;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> totalConsume;

    <span class="hljs-comment">//老板只关注一共花了多少钱以及一共收入多少钱，其余并不关心</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">view</span>(ConsumeBill bill) {
        totalConsume += bill.getAmount();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">view</span>(IncomeBill bill) {
        totalIncome += bill.getAmount();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getTotalIncome</span>() {
        System.out.println(<span class="hljs-string">"老板查看一共收入多少，数目是："</span> + totalIncome);
        <span class="hljs-keyword">return</span> totalIncome;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getTotalConsume</span>() {
        System.out.println(<span class="hljs-string">"老板查看一共花费多少，数目是："</span> + totalConsume);
        <span class="hljs-keyword">return</span> totalConsume;
    }

}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//注册会计师类，查看账本的类之一</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CPA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AccountBookViewer</span>{</span>

    <span class="hljs-comment">//注会在看账本时，如果是支出，则如果支出是工资，则需要看应该交的税交了没</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">view</span>(ConsumeBill bill) {
        <span class="hljs-keyword">if</span> (bill.getItem().equals(<span class="hljs-string">"工资"</span>)) {
            System.out.println(<span class="hljs-string">"注会查看工资是否交个人所得税。"</span>);
        }
    }
    <span class="hljs-comment">//如果是收入，则所有的收入都要交税</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">view</span>(IncomeBill bill) {
        System.out.println(<span class="hljs-string">"注会查看收入交税了没。"</span>);
    }

}</code></pre>

<p>老板只关心收入和支出的总额，而注会只关注该交税的是否交税</p>

<p>接下来是账本类，它是当前访问者模式例子中的对象结构</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//账本类（相当于ObjectStruture）</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> AccountBook {
    <span class="hljs-comment">//单子列表</span>
    <span class="hljs-keyword">private</span> List&lt;Bill&gt; billList = <span class="hljs-keyword">new</span> ArrayList&lt;Bill&gt;();
    <span class="hljs-comment">//添加单子</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addBill</span>(Bill bill){
        billList.add(bill);
    }
    <span class="hljs-comment">//供账本的查看者查看账本</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span>(AccountBookViewer viewer){
        <span class="hljs-keyword">for</span> (Bill bill : billList) {
            bill.accept(viewer);
        }
    }
}</code></pre>

<p>账本类当中有一个列表，这个列表是元素（Bill）的集合，这便是对象结构的通常表示，它一般会是一堆元素的集合，不过这个集合不一定是列表，也可能是树，链表等等任何数据结构，甚至是若干个数据结构。其中show方法，就是账本类的精髓，它会枚举每一个元素，让访问者访问。</p>

<p>测试客户端</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Client {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] args) {
        AccountBook accountBook = <span class="hljs-keyword">new</span> AccountBook();
        <span class="hljs-comment">//添加两条收入</span>
        accountBook.addBill(<span class="hljs-keyword">new</span> IncomeBill(<span class="hljs-number">10000</span>, <span class="hljs-string">"卖商品"</span>));
        accountBook.addBill(<span class="hljs-keyword">new</span> IncomeBill(<span class="hljs-number">12000</span>, <span class="hljs-string">"卖广告位"</span>));
        <span class="hljs-comment">//添加两条支出</span>
        accountBook.addBill(<span class="hljs-keyword">new</span> ConsumeBill(<span class="hljs-number">1000</span>, <span class="hljs-string">"工资"</span>));
        accountBook.addBill(<span class="hljs-keyword">new</span> ConsumeBill(<span class="hljs-number">2000</span>, <span class="hljs-string">"材料费"</span>));

        AccountBookViewer boss = <span class="hljs-keyword">new</span> Boss();
        AccountBookViewer cpa = <span class="hljs-keyword">new</span> CPA();

        <span class="hljs-comment">//两个访问者分别访问账本</span>
        accountBook.show(cpa);
        accountBook.show(boss);

        ((Boss) boss).getTotalConsume();
        ((Boss) boss).getTotalIncome();
    }
}</code></pre>

<p>上面的代码中，可以这么理解，账本以及账本中的元素是非常稳定的，这些几乎不可能改变，而最容易改变的就是访问者这部分。</p>

<p>访问者模式最大的优点就是增加访问者非常容易，我们从代码上来看，如果要增加一个访问者，你只需要做一件事即可，那就是写一个类，实现AccountBookViewer接口，然后就可以直接调用AccountBook的show方法去访问账本了。</p>

<p>如果没使用访问者模式，一定会增加许多if else，而且每增加一个访问者，你都需要改你的if else，代码会显得非常臃肿，而且非常难以扩展和维护。</p>



<h2 id="静态分派以及动态分派"><strong>静态分派以及动态分派</strong></h2>

<p>变量被声明时的类型叫做变量的静态类型(Static Type)，有些人又把静态类型叫做明显类型(Apparent Type)；而变量所引用的对象的真实类型又叫做变量的实际类型(Actual Type)。比如：</p>



<pre class="prettyprint"><code class=" hljs php"><span class="hljs-keyword">List</span> <span class="hljs-keyword">list</span> = <span class="hljs-keyword">null</span>;
<span class="hljs-keyword">list</span> = <span class="hljs-keyword">new</span> ArrayList();</code></pre>

<p>声明了一个变量list，它的静态类型（也叫明显类型）是List，而它的实际类型是ArrayList。根据对象的类型而对方法进行的选择，就是分派(Dispatch)，分派(Dispatch)又分为两种，即静态分派和动态分派。静态分派(Static Dispatch)发生在编译时期，分派根据静态类型信息发生。</p>

<p><strong>静态分派</strong> <br>
静态分派就是按照变量的静态类型进行分派，从而确定方法的执行版本，静态分派在编译时期就可以确定方法的版本。而静态分派最典型的应用就是方法重载</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Main {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>(String <span class="hljs-keyword">string</span>){
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"string"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>(Integer integer){
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"integer"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] args) {
        String <span class="hljs-keyword">string</span> = <span class="hljs-string">"1"</span>;
        Integer integer = <span class="hljs-number">1</span>;
        Main main = <span class="hljs-keyword">new</span> Main();
        main.test(integer);
        main.test(<span class="hljs-keyword">string</span>);
    }
}</code></pre>

<p>在静态分派判断的时候，我们根据多个判断依据（即参数类型和个数）判断出了方法的版本，那么这个就是多分派的概念，因为我们有一个以上的考量标准，也可以称为宗量。所以JAVA是静态多分派的语言。</p>

<p><strong>动态分派</strong> <br>
 对于动态分派，与静态相反，它不是在编译期确定的方法版本，而是在运行时才能确定。而动态分派最典型的应用就是多态的特性</p>



<pre class="prettyprint"><code class=" hljs axapta"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Person</span>{</span>
    <span class="hljs-keyword">void</span> test();
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Man</span> <span class="hljs-inheritance"><span class="hljs-keyword">implements</span></span> <span class="hljs-title">Person</span>{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> test(){
        System.out.println(<span class="hljs-string">"男人"</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Woman</span> <span class="hljs-inheritance"><span class="hljs-keyword">implements</span></span> <span class="hljs-title">Person</span>{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> test(){
        System.out.println(<span class="hljs-string">"女人"</span>);
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> {</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) {
        Person man = <span class="hljs-keyword">new</span> Man();
        Person woman = <span class="hljs-keyword">new</span> Woman();
        man.test();
        woman.test();
    }
}</code></pre>

<p>这段程序输出结果为依次打印男人和女人，然而这里的test方法版本，就无法根据man和woman的静态类型去判断了，他们的静态类型都是Person接口，根本无从判断。</p>

<p>显然，产生的输出结果，就是因为test方法的版本是在运行时判断的，这就是动态分派。</p>

<p>动态分派判断的方法是在运行时获取到man和woman的实际引用类型，再确定方法的版本，而由于此时判断的依据只是实际引用类型，只有一个判断依据，所以这就是单分派的概念，这时我们的考量标准只有一个宗量，即变量的实际引用类型。相应的，这说明JAVA是动态单分派的语言。</p>



<h2 id="访问者模式中的伪动态双分派"><strong>访问者模式中的伪动态双分派</strong></h2>

<p>访问者模式中使用的是伪动态双分派，所谓的动态双分派就是在运行时依据两个实际类型去判断一个方法的运行行为，而访问者模式实现的手段是进行了两次动态单分派来达到这个效果。</p>

<p>回到上面例子当中账本类中的accept方法</p>



<pre class="prettyprint"><code class=" hljs perl"><span class="hljs-keyword">for</span> (Bill bill : billList) {
            bill.<span class="hljs-keyword">accept</span>(viewer);
        }</code></pre>

<p>这里就是依据biil和viewer两个实际类型决定了view方法的版本，从而决定了accept方法的动作。</p>

<p>分析accept方法的调用过程 <br>
1.当调用accept方法时，根据bill的实际类型决定是调用ConsumeBill还是IncomeBill的accept方法。</p>

<p>2.这时accept方法的版本已经确定，假如是ConsumeBill，它的accept方法是调用下面这行代码。</p>

<pre class="prettyprint"><code class=" hljs cs"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(AccountBookViewer viewer) {
        viewer.view(<span class="hljs-keyword">this</span>);
    }</code></pre>

<p>此时的this是ConsumeBill类型，所以对应于AccountBookViewer接口的view(ConsumeBill bill)方法，此时需要再根据viewer的实际类型确定view方法的版本，如此一来，就完成了动态双分派的过程。</p>

<p>以上的过程就是通过两次动态双分派，第一次对accept方法进行动态分派，第二次对view（类图中的visit方法）方法进行动态分派，从而达到了根据两个实际类型确定一个方法的行为的效果。</p>

<p>而原本我们的做法，通常是传入一个接口，直接使用该接口的方法，此为动态单分派，就像策略模式一样。在这里，show方法传入的viewer接口并不是直接调用自己的view方法，而是通过bill的实际类型先动态分派一次，然后在分派后确定的方法版本里再进行自己的动态分派。</p>

<p>注意：这里确定view(ConsumeBill bill)方法是静态分派决定的，所以这个并不在此次动态双分派的范畴内，而且静态分派是在编译期就完成的，所以view(ConsumeBill bill)方法的静态分派与访问者模式的动态双分派并没有任何关系。<strong>动态双分派说到底还是动态分派，是在运行时发生的，它与静态分派有着本质上的区别，不可以说一次动态分派加一次静态分派就是动态双分派，而且访问者模式的双分派本身也是另有所指。</strong></p>

<p>这里的this的类型不是动态确定的，你写在哪个类当中，它的静态类型就是哪个类，这是在编译期就确定的，不确定的是它的实际类型，请各位区分开这一点。</p>



<h2 id="对访问者模式的一些思考"><strong>对访问者模式的一些思考</strong></h2>

<p>假设我们上面的例子当中再添加一个财务主管，而财务主管不管你是支出还是收入，都要详细的查看你的单子的项目以及金额，简单点说就是财务主管类的两个view方法的代码是一样的。</p>

<p>这里的将两个view方法抽取的方案是，我们可以将元素提炼出层次结构，针对层次结构提供操作的方法，这样就实现了优点当中最后两点提到的针对层次定义操作以及跨越层次定义操作。</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//单个单子的接口（相当于Element）</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> Bill {

    <span class="hljs-keyword">void</span> accept(Viewer viewer);

}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//抽象单子类，一个高层次的单子抽象</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractBill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bill</span>{</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">double</span> amount;

    <span class="hljs-keyword">protected</span> String item;

    <span class="hljs-keyword">public</span> <span class="hljs-title">AbstractBill</span>(<span class="hljs-keyword">double</span> amount, String item) {
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.amount = amount;
        <span class="hljs-keyword">this</span>.item = item;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getAmount</span>() {
        <span class="hljs-keyword">return</span> amount;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getItem</span>() {
        <span class="hljs-keyword">return</span> item;
    }

}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//收入单子</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IncomeBill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractBill</span>{</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title">IncomeBill</span>(<span class="hljs-keyword">double</span> amount, String item) {
        <span class="hljs-keyword">super</span>(amount, item);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(Viewer viewer) {
        <span class="hljs-keyword">if</span> (viewer <span class="hljs-keyword">instanceof</span> AbstractViewer) {
            ((AbstractViewer)viewer).viewIncomeBill(<span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">return</span>;
        }
        viewer.viewAbstractBill(<span class="hljs-keyword">this</span>);
    }

}</code></pre>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//消费的单子</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsumeBill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractBill</span>{</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title">ConsumeBill</span>(<span class="hljs-keyword">double</span> amount, String item) {
        <span class="hljs-keyword">super</span>(amount, item);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(Viewer viewer) {
        <span class="hljs-keyword">if</span> (viewer <span class="hljs-keyword">instanceof</span> AbstractViewer) {
            ((AbstractViewer)viewer).viewConsumeBill(<span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">return</span>;
        }
        viewer.viewAbstractBill(<span class="hljs-keyword">this</span>);
    }

}</code></pre>

<p>这是元素类的层次结构，可以看到，我们的accept当中出现了if判断，这里的判断是在判断一个层次，这段代码是不会被更改的。</p>

<p>访问者层次</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//超级访问者接口（它支持定义高层操作）</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> Viewer{

    <span class="hljs-keyword">void</span> viewAbstractBill(AbstractBill bill);

}</code></pre>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//比Viewer接口低一个层次的访问者接口</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractViewer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Viewer</span>{</span>

    <span class="hljs-comment">//查看消费的单子</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> viewConsumeBill(ConsumeBill bill);

    <span class="hljs-comment">//查看收入的单子</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> viewIncomeBill(IncomeBill bill);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">viewAbstractBill</span>(AbstractBill bill){}
}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//老板类，查看账本的类之一，作用于最低层次结构</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Boss</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractViewer</span>{</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> totalIncome;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> totalConsume;

    <span class="hljs-comment">//老板只关注一共花了多少钱以及一共收入多少钱，其余并不关心</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">viewConsumeBill</span>(ConsumeBill bill) {
        totalConsume += bill.getAmount();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">viewIncomeBill</span>(IncomeBill bill) {
        totalIncome += bill.getAmount();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getTotalIncome</span>() {
        System.out.println(<span class="hljs-string">"老板查看一共收入多少，数目是："</span> + totalIncome);
        <span class="hljs-keyword">return</span> totalIncome;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getTotalConsume</span>() {
        System.out.println(<span class="hljs-string">"老板查看一共花费多少，数目是："</span> + totalConsume);
        <span class="hljs-keyword">return</span> totalConsume;
    }

}</code></pre>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//注册会计师类，查看账本的类之一，作用于最低层次结构</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CPA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractViewer</span>{</span>

    <span class="hljs-comment">//注会在看账本时，如果是支出，则如果支出是工资，则需要看应该交的税交了没</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">viewConsumeBill</span>(ConsumeBill bill) {
        <span class="hljs-keyword">if</span> (bill.getItem().equals(<span class="hljs-string">"工资"</span>)) {
            System.out.println(<span class="hljs-string">"注会查看是否交个人所得税。"</span>);
        }
    }
    <span class="hljs-comment">//如果是收入，则所有的收入都要交税</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">viewIncomeBill</span>(IncomeBill bill) {
        System.out.println(<span class="hljs-string">"注会查看收入交税了没。"</span>);
    }

}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">//财务主管类，查看账本的类之一，作用于高层的层次结构</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CFO</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Viewer</span> {</span>

    <span class="hljs-comment">//财务主管对每一个单子都要核对项目和金额</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">viewAbstractBill</span>(AbstractBill bill) {
        System.out.println(<span class="hljs-string">"财务主管查看账本时，每一个都核对项目和金额，金额是"</span> + bill.getAmount() + <span class="hljs-string">"，项目是"</span> + bill.getItem());
    }

}</code></pre>

<p>财务主管（CFO）是针对AbstractBill这一层定义的操作，而原来的老板（Boss）和注册会计师（CPA）都是针对ConsumeBill和IncomeBill这一层定义的操作，这时已经产生了跨越层次结构的行为，老板和注册会计师都跨过了抽象单子这一层，直接针对具体的单子定义操作。</p>

<p>账本类没有变化，最后看客户端的使用</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Client {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] args) {
        AccountBook accountBook = <span class="hljs-keyword">new</span> AccountBook();
        <span class="hljs-comment">//添加两条收入</span>
        accountBook.addBill(<span class="hljs-keyword">new</span> IncomeBill(<span class="hljs-number">10000</span>, <span class="hljs-string">"卖商品"</span>));
        accountBook.addBill(<span class="hljs-keyword">new</span> IncomeBill(<span class="hljs-number">12000</span>, <span class="hljs-string">"卖广告位"</span>));
        <span class="hljs-comment">//添加两条支出</span>
        accountBook.addBill(<span class="hljs-keyword">new</span> ConsumeBill(<span class="hljs-number">1000</span>, <span class="hljs-string">"工资"</span>));
        accountBook.addBill(<span class="hljs-keyword">new</span> ConsumeBill(<span class="hljs-number">2000</span>, <span class="hljs-string">"材料费"</span>));

        Viewer boss = <span class="hljs-keyword">new</span> Boss();
        Viewer cpa = <span class="hljs-keyword">new</span> CPA();
        Viewer cfo = <span class="hljs-keyword">new</span> CFO();

        <span class="hljs-comment">//两个访问者分别访问账本</span>
        accountBook.show(cpa);
        accountBook.show(boss);
        accountBook.show(cfo);

        ((Boss) boss).getTotalConsume();
        ((Boss) boss).getTotalIncome();
    }
}</code></pre>

<p>回想一下，要是再出现和财务主管一样对所有单子都是一样操作的人，我们就不需要复制代码了，只需要让他实现Viewer接口就可以了，而如果要像老板和注会一样区分单子的具体类型，则继承AbstractViewer就可以。</p>



<h2 id="android中的访问者模式"><strong>Android中的访问者模式</strong></h2>

<p>安卓中的著名开源库ButterKnife、Dagger、Retrofit都是基于APT（Annotation Processing Tools）实现。而编译注解核心依赖APT。当我们通过APT处理注解时，最终会将获取到的元素转换为相应的Element元素，以便获取到它们对应信息。那么元素基类的源码如下：（路径：javax.lang.model.element.Element）</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Element</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">javax</span>.<span class="hljs-title">lang</span>.<span class="hljs-title">model</span>.<span class="hljs-title">AnnotatedConstruct</span> {</span>

    <span class="hljs-javadoc">/**
     * Returns the {@code kind} of this element.
     *
     *<span class="hljs-javadoctag"> @return</span> the kind of this element
     */</span>
    ElementKind getKind();<span class="hljs-comment">//获取元素类型</span>

    <span class="hljs-comment">//代码省略</span>

    <span class="hljs-javadoc">/**
     * Applies a visitor to this element.
     *
     *<span class="hljs-javadoctag"> @param</span> &lt;R&gt; the return type of the visitor's methods
     *<span class="hljs-javadoctag"> @param</span> &lt;P&gt; the type of the additional parameter to the visitor's methods
     *<span class="hljs-javadoctag"> @param</span> v   the visitor operating on this element
     *<span class="hljs-javadoctag"> @param</span> p   additional parameter to the visitor
     *<span class="hljs-javadoctag"> @return</span> a visitor-specified result
     */</span>
    &lt;R, P&gt; R accept(ElementVisitor&lt;R, P&gt; v, P p);<span class="hljs-comment">//接受访问者的访问</span>
}</code></pre>

<p>ElementVisitor就是访问者类型，ElementVisitor源码如下：</p>



<pre class="prettyprint"><code class=" hljs scala">public interface ElementVisitor&lt;R, P&gt; {
    <span class="hljs-javadoc">/**
     * Visits an element.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visit(Element e, P p);

    <span class="hljs-javadoc">/**
     * A convenience method equivalent to {<span class="hljs-javadoctag">@code</span> v.visit(e, null)}.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visit(Element e);

    <span class="hljs-javadoc">/**
     * Visits a package element.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visitPackage(PackageElement e, P p);

    <span class="hljs-javadoc">/**
     * Visits a type element.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visitType(TypeElement e, P p);

    <span class="hljs-javadoc">/**
     * Visits a variable element.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visitVariable(VariableElement e, P p);

    <span class="hljs-javadoc">/**
     * Visits an executable element.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visitExecutable(ExecutableElement e, P p);

    <span class="hljs-javadoc">/**
     * Visits a type parameter element.
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     */</span>
    R visitTypeParameter(TypeParameterElement e, P p);

    <span class="hljs-javadoc">/**
     * Visits an unknown kind of element.
     * This can occur if the language evolves and new kinds
     * of elements are added to the {<span class="hljs-javadoctag">@code</span> Element} hierarchy.
     *
     * <span class="hljs-javadoctag">@param</span> e  the element to visit
     * <span class="hljs-javadoctag">@param</span> p  a visitor-specified parameter
     * <span class="hljs-javadoctag">@return</span> a visitor-specified result
     * <span class="hljs-javadoctag">@throws</span> UnknownElementException
     *  a visitor implementation may optionally throw this exception
     */</span>
    R visitUnknown(Element e, P p);
}</code></pre>

<p>在ElementVisitor中定义了多种visit接口，每个接口处理一种元素类型，那么这就是典型的访问者模式。</p>



<h2 id="总结"><strong>总结</strong></h2>

<p><strong>优点：</strong></p>

<p>1、使得数据结构和作用于结构上的操作解耦，使得操作集合可以独立变化。</p>

<p>2、添加新的操作或者说访问者会非常容易。</p>

<p>3、将对各个元素的一组操作集中在一个访问者类当中。</p>

<p>4、使得类层次结构不改变的情况下，可以针对各个层次做出不同的操作，而不影响类层次结构的完整性。</p>

<p>5、可以跨越类层次结构，访问不同层次的元素类，做出相应的操作。</p>

<p><strong>缺点：</strong></p>

<p>1、增加新的元素会非常困难。</p>

<p>2、实现起来比较复杂，会增加系统的复杂性。</p>

<p>3、破坏封装，如果将访问行为放在各个元素中，则可以不暴露元素的内部结构和状态，但使用访问者模式的时候，为了让访问者能获取到所关心的信息，元素类不得不暴露出一些内部的状态和结构，就像收入和支出类必须提供访问金额和单子的项目的方法一样。</p>

<p><strong>适用性：</strong></p>

<p>1、数据结构稳定，作用于数据结构的操作经常变化的时候。</p>

<p>2、当一个数据结构中，一些元素类需要负责与其不相关的操作的时候，为了将这些操作分离出去，以减少这些元素类的职责时，可以使用访问者模式。</p>

<p>3、有时在对数据结构上的元素进行操作的时候，需要区分具体的类型，这时使用访问者模式可以针对不同的类型，在访问者类中定义不同的操作，从而去除掉类型判断。</p>            </div>
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css" />
                </div>
				<div class="hide-article-box text-center">
			<a class="btn btn-red-hollow" id="btn-readmore" data-track-view='{"mod":"popu_376","con":",https://blog.csdn.net/u012124438/article/details/70537203,"}' data-track-click='{"mod":"popu_376","con":",https://blog.csdn.net/u012124438/article/details/70537203,"}'>阅读更多</a>
		</div>
        	</article>
	
		<div class="article-bar-bottom">
				<div class="article-copyright">
			版权声明：本文为博主原创文章，未经博主允许不得转载。			https://blog.csdn.net/u012124438/article/details/70537203		</div>
						<div class="tags-box artic-tag-box">
			<span class="label">文章标签：</span>
						<a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=设计模式&t=blog" target="_blank">设计模式						<a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=访问者模式&t=blog" target="_blank">访问者模式						</a>
		</div>
						<div class="tags-box">
			<span class="label">个人分类：</span>
						<a class="tag-link" href="https://blog.csdn.net/u012124438/article/category/6730082"  target="_blank">设计模式						</a>
		</div>
								<div class="tags-box hot-word">
			<span class="label">相关热词：</span>
						<a class="tag-link" href="https://blog.csdn.net/zhangcanyan/article/details/51778828" target="_blank">
			of设计模式			</a>
						<a class="tag-link" href="https://blog.csdn.net/u013490585/article/details/61931532" target="_blank">
			it设计模式			</a>
						<a class="tag-link" href="https://blog.csdn.net/jason0539/article/details/23297037" target="_blank">
			单利设计模式			</a>
						<a class="tag-link" href="https://blog.csdn.net/a925907195/article/details/41981647" target="_blank">
			变成设计模式			</a>
						<a class="tag-link" href="https://blog.csdn.net/NewRivers/article/details/78704543" target="_blank">
			反设计模式			</a>
					</div>
			</div>
	
	<!-- !empty($pre_next_article[0]) -->
			<div class="related-article related-article-prev text-truncate">
		<a href="https://blog.csdn.net/u012124438/article/details/70486083">
			<span>上一篇</span>设计模式学习之适配器模式		</a>
	</div>
				<div class="related-article related-article-next text-truncate">
		<a href="https://blog.csdn.net/u012124438/article/details/70990816">
			<span>下一篇</span>Android Framework学习(一)之init进程解析		</a>
	</div>
	</div>
<script>
    $(".MathJax").remove();
</script>

<script type="text/javascript" src="https://static-blog.csdn.net/mdeditor/public/res/bower-libs/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
			"HTML-CSS": {
					linebreaks: { automatic: true, width: "94%container" },
					imageFont: null
			},
			tex2jax: {
				preview: "none"
			},
			mml2jax: {
				preview: 'none'
			}
	});
</script>
<script>
	(function(){
		var btnReadmore = $("#btn-readmore");
		if(btnReadmore.length>0){
			var winH = $(window).height();
			var articleBox = $("div.article_content");
			var artH = articleBox.height();
			if(artH > winH*2){
				articleBox.css({
					'height':winH*2+'px',
					'overflow':'hidden'
				})
				btnReadmore.click(function(){
					articleBox.removeAttr("style");
					$(this).parent().remove();
				})
			}else{
				btnReadmore.parent().remove();
			}
		}
	})()
</script>        <div class="p4course_target" ></div><script>window.p4sdk_enable_courseBox=true</script>        <a id="commentBox"></a>
<div class="comment-box">
	  	<div class="unlogin-box text-center">
		想对作者说点什么？
		<!-- $curl 当前地址 -->
		<a href="https://passport.csdn.net/account/login?from=https://blog.csdn.net/u012124438/article/details/70537203#commentBox" class="btn btn-sm btn-red">我来说一句</a>
	</div>
			<div class="comment-list-container">
		<a id="comments"></a>
		<div class="comment-list-box">
		</div>
		<div id="commentPage" class="pagination-box d-none"></div>
		<div class="opt-box text-center">
			<button class="btn btn-sm btn-link-blue" id="btnMoreComment"></button>
		</div>
	</div>
</div>        <div class="recommend-box">
            		<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/chuyouyinghe/article/details/50784177,BlogCommendESEnWordWeight_0"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/chuyouyinghe/article/details/50784177,BlogCommendESEnWordWeight_0"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/chuyouyinghe/article/details/50784177" target="_blank" title="<em>设计模式</em>之<em>访问者模式</em>+组合模式">
				<em>设计模式</em>之<em>访问者模式</em>+组合模式			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/chuyouyinghe" target="_blank">
					<img src="https://avatar.csdn.net/3/4/9/3_chuyouyinghe.jpg" alt="chuyouyinghe" class="avatar-pic">
					<span class="namebox">
						<span class="name">chuyouyinghe</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">03-02</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					401</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/chuyouyinghe/article/details/50784177" target="_blank" >
				访问者模式Visitor


CRM 客户关系管理


类型：企业客户，个人客户
功能：提出服务申请、客户偏好分析、客户价值分析


定义：
表示一个作用于某对象结构中的各元素的...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/cooldragon/article/details/52177273,BlogCommendESEnWordWeight_1"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/cooldragon/article/details/52177273,BlogCommendESEnWordWeight_1"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/cooldragon/article/details/52177273" target="_blank" title="<em>设计模式</em>总结之Visitor Pattern（<em>访问者模式</em>）">
				<em>设计模式</em>总结之Visitor Pattern（<em>访问者模式</em>）			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/cooldragon" target="_blank">
					<img src="https://avatar.csdn.net/C/6/A/3_cooldragon.jpg" alt="cooldragon" class="avatar-pic">
					<span class="namebox">
						<span class="name">cooldragon</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">08-12</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					6194</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/cooldragon/article/details/52177273" target="_blank" >
				表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。...			</a>
		</p>

	</div>
														<div class="recommend-item-box recommend-ad-box">
						<script type="text/javascript" src="//cee1.iteye.com/pkcgstjjm.js"></script>
					</div>
							
				<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/taozi8023/article/details/51457616,BlogCommendESEnWordWeight_2"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/taozi8023/article/details/51457616,BlogCommendESEnWordWeight_2"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/taozi8023/article/details/51457616" target="_blank" title="JAVA<em>设计模式</em>（23）：行为型-<em>访问者模式</em>（Visitor）">
				JAVA<em>设计模式</em>（23）：行为型-<em>访问者模式</em>（Visitor）			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/taozi8023" target="_blank">
					<img src="https://avatar.csdn.net/D/8/4/3_taozi8023.jpg" alt="taozi8023" class="avatar-pic">
					<span class="namebox">
						<span class="name">taozi8023</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">05-19</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					4408</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/taozi8023/article/details/51457616" target="_blank" >
				想必大家都去过医院，虽然没有人喜欢去医院（爱岗敬业的医务工作人员除外，）。在医生开具处方单（药单）后，很多医院都存在如下处理流程：划价人员拿到处方单之后根据药品名称和数量计算总价，药房工作人员根据药品...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/lqh517/article/details/51751530,BlogCommendESEnWordWeight_3"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/lqh517/article/details/51751530,BlogCommendESEnWordWeight_3"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/lqh517/article/details/51751530" target="_blank" title="Java<em>设计模式</em>之--<em>访问者模式</em>（Visitor）">
				Java<em>设计模式</em>之--<em>访问者模式</em>（Visitor）			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/lqh517" target="_blank">
					<img src="https://avatar.csdn.net/1/0/E/3_lqh517.jpg" alt="lqh517" class="avatar-pic">
					<span class="namebox">
						<span class="name">lqh517</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">06-24</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					548</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/lqh517/article/details/51751530" target="_blank" >
				概念：
访问者模式（Visitor）行为设计模式。访问者模式被用在针对一组相同类型对象的操作。优点是，可以把针对此对象的操作逻辑转移到另外一个类上。用于数据结构和作用于结构上的操作解耦合，使得操作集合...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/l416112167/article/details/41151987,BlogCommendESEnWordWeight_4"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/l416112167/article/details/41151987,BlogCommendESEnWordWeight_4"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/l416112167/article/details/41151987" target="_blank" title="JAVA<em>设计模式</em>之 <em>访问者模式</em>【Visitor Pattern】">
				JAVA<em>设计模式</em>之 <em>访问者模式</em>【Visitor Pattern】			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/l416112167" target="_blank">
					<img src="https://avatar.csdn.net/1/3/9/3_l416112167.jpg" alt="l416112167" class="avatar-pic">
					<span class="namebox">
						<span class="name">l416112167</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">11-15</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					3868</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/l416112167/article/details/41151987" target="_blank" >
				一、概述

    访问者模式是一种较为复杂的行为型设计模式，它包含访问者和被访问元素两个主要组成部分，这些被访问的元素通常具有不同的类型，且不同的访问者可以对它们进行不同的访问操作。在使用访问者...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/tianyucad123/article/details/52201304,BlogCommendESEnWordWeight_5"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/tianyucad123/article/details/52201304,BlogCommendESEnWordWeight_5"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/tianyucad123/article/details/52201304" target="_blank" title="观察者模式（Observer），责任链模式，<em>访问者模式</em>（Visitor）">
				观察者模式（Observer），责任链模式，<em>访问者模式</em>（Visitor）			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/tianyucad123" target="_blank">
					<img src="https://avatar.csdn.net/4/6/1/3_tianyucad123.jpg" alt="tianyucad123" class="avatar-pic">
					<span class="namebox">
						<span class="name">tianyucad123</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">08-13</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					1619</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/tianyucad123/article/details/52201304" target="_blank" >
				概念：定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。行为型模式。


main()，
IObservable，被观察者接口
CHan...			</a>
		</p>

	</div>
								<div class="recommend-item-box recommend-ad-box" id="a_d_feed_0"></div>
			<script>
				var width = $("div.recommend-box").outerWidth() - 48;
				NEWS_FEED({
					w: width,
					h: 60,
					showid: 'Afihld',
					placeholderId: 'a_d_feed_0',
					inject: 'define',
					define: {
						imagePosition: 'right',
						imageBorderRadius: 0,
						imageWidth: 90,
						imageHeight: 60,
						imageFill: 'clip',
						displayImage: true,
						displayTitle: true,
						titleFontSize: 20,
						titleFontColor: '#333',
						titleFontFamily: 'Microsoft Yahei',
						titleFontWeight: 'bold',
						titlePaddingTop: 0,
						titlePaddingRight: 0,
						titlePaddingBottom: 10,
						titlePaddingLeft: 0,
						displayDesc: true,
						descFontSize: 14,
						descPaddingLeft: 14,
						descFontColor: '#6b6b6b',
						descFontFamily: 'Microsoft Yahei',
						paddingTop: 0,
						paddingRight: 0,
						paddingBottom: 0,
						paddingLeft: 0,
						backgroundColor: '#fff',
						hoverColor: '#ca0c16'
					}
				})
			</script>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/loonsd/article/details/50596470,BlogCommendESEnWordWeight_6"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/loonsd/article/details/50596470,BlogCommendESEnWordWeight_6"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/loonsd/article/details/50596470" target="_blank" title="<em>访问者模式</em>">
				<em>访问者模式</em>			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/loonsd" target="_blank">
					<img src="https://avatar.csdn.net/A/0/1/3_loonsd.jpg" alt="loonsd" class="avatar-pic">
					<span class="namebox">
						<span class="name">loonsd</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">01-28</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					625</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/loonsd/article/details/50596470" target="_blank" >
				访问者模式（Visitor）：表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。
结构图


角色
Visitor抽象访问者
抽象类或者接口，声...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/feixiaoxing/article/details/7188574,BlogCommendESEnWordWeight_7"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/feixiaoxing/article/details/7188574,BlogCommendESEnWordWeight_7"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/feixiaoxing/article/details/7188574" target="_blank" title="C语言和<em>设计模式</em>（<em>访问者模式</em>）">
				C语言和<em>设计模式</em>（<em>访问者模式</em>）			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/feixiaoxing" target="_blank">
					<img src="https://avatar.csdn.net/0/9/C/3_feixiaoxing.jpg" alt="feixiaoxing" class="avatar-pic">
					<span class="namebox">
						<span class="name">feixiaoxing</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">01-09</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					1.1万</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/feixiaoxing/article/details/7188574" target="_blank" >
				【 声明：版权所有，欢迎转载，请勿用于商业用途。  联系信箱：feixiaoxing @163.com】

    不知不觉当中，我们就到了最后一种设计模式，即访问者模式。访问者模式，听上去复杂一...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/L_Andy/article/details/36896645,BlogCommendESEnWordWeight_8"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/L_Andy/article/details/36896645,BlogCommendESEnWordWeight_8"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/L_Andy/article/details/36896645" target="_blank" title="C++<em>设计模式</em>实现--访问者(Visitor)模式">
				C++<em>设计模式</em>实现--访问者(Visitor)模式			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/L_Andy" target="_blank">
					<img src="https://avatar.csdn.net/C/9/2/3_l_andy.jpg" alt="L_Andy" class="avatar-pic">
					<span class="namebox">
						<span class="name">L_Andy</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">07-04</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					1459</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/L_Andy/article/details/36896645" target="_blank" >
				一. 访问者模式

定义：表示一个作用于某对象结构中的各元素的操作。它你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。

结构如下：




二. 举例

假设有一项...			</a>
		</p>

	</div>
					<div class="recommend-item-box" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/z742182637/article/details/50402816,BlogCommendESEnWordWeight_9"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/z742182637/article/details/50402816,BlogCommendESEnWordWeight_9"}'>
		<h4 class="text-truncate oneline">
			<a href="https://blog.csdn.net/z742182637/article/details/50402816" target="_blank" title="行为型：<em>设计模式</em>之<em>访问者模式</em>（二十三）">
				行为型：<em>设计模式</em>之<em>访问者模式</em>（二十三）			</a>
		</h4>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/z742182637" target="_blank">
					<img src="https://avatar.csdn.net/B/3/9/3_z742182637.jpg" alt="z742182637" class="avatar-pic">
					<span class="namebox">
						<span class="name">z742182637</span>
						<span class="triangle"></span>
					</span>
				</a>
			</p>
			<p class="date-and-readNum">
				<span class="date hover-show">12-25</span>
				<span class="read-num hover-hide">
					<svg class="icon csdnc-yuedushu" aria-hidden="true">
						<use xlink:href="#csdnc-yuedushu"></use>
					</svg>
					612</span>
			</p>
		</div>
		<p class="content oneline">
			<a class="oneline" href="https://blog.csdn.net/z742182637/article/details/50402816" target="_blank" >
				想必大家都去过医院，虽然没有人喜欢去医院（爱岗敬业的医务工作人员除外，）。在医生开具处方单（药单）后，很多医院都存在如下处理流程：划价人员拿到处方单之后根据药品名称和数量计算总价，药房工作人员根据药品...			</a>
		</p>

	</div>
			
            <div class="recommend-loading-box">
                <img src='https://csdnimg.cn/release/phoenix/images/feedLoading.gif'>
            </div>
            <div class="recommend-end-box">
                <p class="text-center">没有更多推荐了，<a href="https://blog.csdn.net/" class="c-blue c-blue-hover c-blue-focus">返回首页</a></p>
            </div>
        </div>
    </main>
    <aside>
		    <div id="asideProfile" class="aside-box">
    <h3 class="aside-title">个人资料</h3>
    <div class="profile-intro d-flex">
        <div class="avatar-box d-flex justify-content-center flex-column">
            <a href="https://blog.csdn.net/u012124438">
                <img src="https://avatar.csdn.net/B/9/9/3_u012124438.jpg" class="avatar_pic">
            </a>
        </div>
        <div class="user-info d-flex justify-content-center flex-column">
            <p class="name csdn-tracking-statistics tracking-click" data-mod="popu_379">
                <a href="https://blog.csdn.net/u012124438" target="_blank" class="text-truncate" id="uid">伯努力不努力</a>
            </p>
                        <p class="flag">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#csdnc-blogexpert"></use>
                </svg>
                博客专家
            </p>
                    </div>
                <div class="opt-box d-flex justify-content-center flex-column">
            <span  class="csdn-tracking-statistics tracking-click" data-mod="popu_379">
                                <a class="btn btn-sm btn-red-hollow" href="https://passport.csdn.net/account/login?from=https://blog.csdn.net/u012124438/article/details/70537203" target="_self">关注</a>
                            </span>
                    </div>
            </div>
    <div class="data-info d-flex item-tiling">
                <dl class="text-center" title="105">
                        <dt><a href="https://blog.csdn.net/u012124438?t=1">原创</a></dt>
            <dd><a href="https://blog.csdn.net/u012124438?t=1"><span class="count">105</span></a></dd>
                    </dl>
        <dl class="text-center" title="1199">
            <dt>粉丝</dt>
            <dd><span class="count" id="fan">1199</span></dd>
        </dl>
        <dl class="text-center" title="470">
            <dt>喜欢</dt>
            <dd><span class="count">470</span></dd>
        </dl>
        <dl class="text-center" title="282">
            <dt>评论</dt>
            <dd><span class="count">282</span></dd>
        </dl>
    </div>
    <div class="grade-box clearfix">
        <dl>
            <dt>等级：</dt>
            <dd>
                <a href="https://blog.csdn.net/home/help.html#level" title="6级,点击查看等级说明" target="_blank">
                    <svg class="icon icon-level" aria-hidden="true">
                        <use xlink:href="#csdnc-bloglevel-6"></use>
                    </svg>
                </a>
            </dd>
        </dl>
        <dl>
            <dt>访问：</dt>
            <dd title="633339">
                63万+            </dd>
        </dl>
        <dl>
            <dt>积分：</dt>
            <dd title="6525">
                6525            </dd>
        </dl>
        <dl title="5063">
            <dt>排名：</dt>
            <dd>5063</dd>
        </dl>
    </div>
    </div>		    <div class="csdn-tracking-statistics mb8 box-shadow" data-pid="blog" data-mod="popu_4" style="height:250px;">
    <div class="aside-content text-center" id="cpro_u2734133">
              <script type="text/javascript" src="//cee1.iteye.com/lgyyovfyh.js"></script>
          </div>
</div>
		    <div id="asideNewArticle" class="aside-box">
    <h3 class="aside-title">最新文章</h3>
    <div class="aside-content">
        <ul class="inf_list clearfix csdn-tracking-statistics tracking-click" data-mod="popu_382">
                        <li class="clearfix">
                <a href="https://blog.csdn.net/u012124438/article/details/80492975" target="_blank">从TargetApi22升级到TargetApi26注意事项</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/u012124438/article/details/79342009" target="_blank">详解java虚拟机方法调用</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/u012124438/article/details/78944588" target="_blank">再见2017，你好2018！</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/u012124438/article/details/78546983" target="_blank">Java数据结构与算法解析(十七)——斜堆</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/u012124438/article/details/78410468" target="_blank">Java数据结构与算法解析(十五)——左式堆</a>
            </li>
                    </ul>
    </div>
</div>
		    <div id="asideColumn" class="aside-box">
    <h3 class="aside-title">博主专栏</h3>
    <div class="aside-content">
        <ul class="column-box csdn-tracking-statistics tracking-click" data-mod="popu_520" >
                            <li class="clearfix">
                    <div class="img-box float-left">
                        <a class="d-flex align-items-center" href="https://blog.csdn.net/column/details/16551.html">
                            <img src="https://img-blog.csdn.net/20170725000415885?imageView2/5/w/120/h/120" alt="">
                        </a>
                    </div>
                    <div class="info">
                        <p class="title"><a href="https://blog.csdn.net/column/details/16551.html">Kotlin学习之路</a></p>
                        <div class="data">阅读量：<span>0</span><span class="count">0 篇</span></div>
                    </div>
                </li>
                    </ul>
    </div>
    </div>
		    <div id="asideCategory" class="aside-box flexible-box">
    <h3 class="aside-title">个人分类</h3>
    <div class="aside-content">
        <ul>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6215688">
                    Android                    <span class="count float-right">12篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6276505">
                    Material Design                    <span class="count float-right">6篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6294765">
                    架构设计                    <span class="count float-right">3篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6327956">
                    自定义控件                    <span class="count float-right">5篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6369404">
                    性能优化                    <span class="count float-right">9篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6506582">
                    开发笔记                    <span class="count float-right">4篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6529583">
                    插件化系列                    <span class="count float-right">10篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6543624">
                    混合开发                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6556344">
                    开源框架解析                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6701467">
                    安卓源码解析                    <span class="count float-right">16篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6730082">
                    设计模式                    <span class="count float-right">10篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6789774">
                    热修复系列                    <span class="count float-right">3篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/6844435">
                    java                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u012124438/article/category/7130478">
                    数据结构与算法                    <span class="count float-right">15篇</span>
                </a>
            </li>
                    </ul>
    </div>
        <p class="text-center">
        <a class="btn btn-link-blue flexible-btn" data-fbox="aside-archive">展开</a>
    </p>
    </div>
		    <div id="asideArchive" class="aside-box flexible-box">
    <h3 class="aside-title">归档</h3>
    <div class="aside-content">
        <ul class="archive-list">
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2018/06">
                    2018年6月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2018/01">
                    2018年1月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/12">
                    2017年12月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/11">
                    2017年11月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/10">
                    2017年10月                    <span class="count float-right">4篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/09">
                    2017年9月                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/08">
                    2017年8月                    <span class="count float-right">5篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/07">
                    2017年7月                    <span class="count float-right">6篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/06">
                    2017年6月                    <span class="count float-right">4篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/05">
                    2017年5月                    <span class="count float-right">14篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/04">
                    2017年4月                    <span class="count float-right">12篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/03">
                    2017年3月                    <span class="count float-right">5篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/02">
                    2017年2月                    <span class="count float-right">6篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2017/01">
                    2017年1月                    <span class="count float-right">3篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2016/12">
                    2016年12月                    <span class="count float-right">4篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2016/11">
                    2016年11月                    <span class="count float-right">17篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2016/09">
                    2016年9月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2016/08">
                    2016年8月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2016/07">
                    2016年7月                    <span class="count float-right">4篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u012124438/article/month/2016/06">
                    2016年6月                    <span class="count float-right">4篇</span>
                </a>
            </li>
                    </ul>
    </div>
        <p class="text-center">
        <a class="btn btn-link-blue flexible-btn" data-fbox="aside-archive">展开</a>
    </p>
    </div>
		    <div id="asideHotArticle" class="aside-box">
	<h3 class="aside-title">热门文章</h3>
	<div class="aside-content">
		<ul class="hotArticle-list csdn-tracking-statistics tracking-click" data-mod="popu_521">
							<li>
					<a href="https://blog.csdn.net/u012124438/article/details/70039943">设计模式学习之策略模式</a>
					<p class="read">阅读量：<span>39880</span></p>
				</li>
							<li>
					<a href="https://blog.csdn.net/u012124438/article/details/54236967">深入解析OkHttp3</a>
					<p class="read">阅读量：<span>38344</span></p>
				</li>
							<li>
					<a href="https://blog.csdn.net/u012124438/article/details/53495951">一篇博客理解Recyclerview的使用</a>
					<p class="read">阅读量：<span>34240</span></p>
				</li>
							<li>
					<a href="https://blog.csdn.net/u012124438/article/details/72835893">Android  Gradle知识梳理</a>
					<p class="read">阅读量：<span>22658</span></p>
				</li>
							<li>
					<a href="https://blog.csdn.net/u012124438/article/details/53730717">一篇博客让你了解RxJava</a>
					<p class="read">阅读量：<span>21294</span></p>
				</li>
					</ul>
	</div>
</div>
		    <div id="asideNewComments" class="aside-box">
    <h3 class="aside-title">最新评论</h3>
    <div class="aside-content">
        <ul class="newcomment-list">
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/u012124438/article/details/70039943#comments">设计模式学习之策略模式</a>
                <p class="comment">
                    <a href="https://my.csdn.net/u013990635" class="user-name" target="_blank">u013990635</a>：mark                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/u012124438/article/details/66087785#comments">Android性能优化系列之Bit...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/hfeiwuqilong" class="user-name" target="_blank">hfeiwuqilong</a>：很详细，mark 了。                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/u012124438/article/details/70039943#comments">设计模式学习之策略模式</a>
                <p class="comment">
                    <a href="https://my.csdn.net/qq_37104919" class="user-name" target="_blank">qq_37104919</a>：不错不错 多分享                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/u012124438/article/details/53365523#comments">从零开始学Android自定义Vi...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/Zhijunhao" class="user-name" target="_blank">Zhijunhao</a>：唉，你这是明显抄的别人啊，还没有抄对。
https://blog.csdn.net/jdsjlzx...                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/u012124438/article/details/53365523#comments">从零开始学Android自定义Vi...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/Zhijunhao" class="user-name" target="_blank">Zhijunhao</a>：ObjectAnimator anim2 = ObjectAnimator.ofFloat(myA...                </p>
            </li>
                    </ul>
    </div>
</div>
		<div id="asideFooter">
			
		<div class="aside-box">
						<script type="text/javascript" src="//cee1.iteye.com/avneunkwb.js"></script>
					</div>
				<div class="aside-box">
			<div class="persion_article">
			</div>
		</div>
	</div>
</aside>
<script src="https://csdnimg.cn/pubfooter/js/publib_footer-1.0.3.js" data-isfootertrack="false" type="text/javascript"></script>
<script>
	$("a.flexible-btn").click(function(){
		$(this).parents('div.aside-box').removeClass('flexible-box');
		$(this).remove();
	})
</script>
</div>
<div class="mask-dark"></div>
<div class="pulllog-box" style="display: block;">
	<div class="pulllog clearfix">
		<span class="text float-left">
			<!-- 广告位：PC-博客内页底通 文字链位置 -->
			<script>
			(function() {
				var s = "_" + Math.random().toString(36).slice(2);
				document.write('<div id="baidufooter_0001"></div>');
				(window.slotbydup=window.slotbydup || []).push({
					id: '5851901',
					container: 'baidufooter_0001',
					size: '520,40',
					display: 'inlay-fix'
				});
			})();
			</script>
			<script src="https://dup.baidustatic.com/js/os.js"></script>
			<style>
				#baidufooter_0001{
					display: none !important;
				}
			</style>
		</span>
		<div class="pulllog-btn float-right clearfix">
            <button class="pulllog-login float-left csdn-tracking-statistics tracking-click" data-mod="popu_557">
                登录
            </button>
            <div class="pulllog-sigin float-left csdn-tracking-statistics tracking-click" data-mod="popu_558">
                <a href="https://passport.csdn.net/account/mobileregister" target="_blank">注册</a>
            </div>
            <button class="btn-close">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#csdnc-times"></use>
                </svg>
            </button>
		</div>
	</div>
</div>
<div id="loginWrap" style="display:none"></div>
<div class="tool-box">
	<ul class="meau-list">
		<li>
			<button class="btn-like " title="点赞">
				<svg class="icon active" aria-hidden="true">
					<use xlink:href="#csdnc-thumbsup-ok"></use>
				</svg><svg class="icon no-active" aria-hidden="true">
					<use xlink:href="#csdnc-thumbsup"></use>
				</svg>
				<p>8</p>
			</button>
		</li>
		<li>
			<a class="btn-comments" title="写评论" href="#commentBox">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-comments"></use>
				</svg><br>写评论			</a>
		</li>
		<li class="toc-container-box" id="liTocBox">
			<button class="btn-toc" title="目录">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-contents"></use>
				</svg><br>目录
			</button>
			<div class="toc-container">
				<div class="pos-box">
					<div class="icon-arrow"></div>
					<div class="scroll-box">
						<div class="toc-box"></div>
					</div>
				</div>
				<div class="opt-box">
					<button class="btn-opt prev nomore" title="向上">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#csdnc-chevronup"></use>
						</svg>
					</button>
					<button class="btn-opt next">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#csdnc-chevrondown"></use>
						</svg>
					</button>
				</div>
			</div>
		</li>
		<li>
			<button class="btn-bookmark" title="收藏">
				<svg class="icon active" aria-hidden="true">
					<use xlink:href="#csdnc-bookmark-ok"></use>
				</svg><svg class="icon no-active" aria-hidden="true">
					<use xlink:href="#csdnc-bookmark"></use>
				</svg><br>收藏
			</button>
		</li>
				<li class="bdsharebuttonbox">
			<a class="btn-comments bds_weixin" data-cmd="weixin" title="微信分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-wechat"></use>
				</svg><br>微信
			</a>
		</li>
		<li class="bdsharebuttonbox">
			<a class="btn-comments bds_tsina" data-cmd="tsina" title="微博分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-weibo"></use>
				</svg><br>微博
			</a>
		</li>
		<li class="bdsharebuttonbox">
			<a class="btn-comments bds_qzone" data-cmd="qzone" title="QQ分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-qq"></use>
				</svg><br>QQ
			</a>
		</li>
	</ul>
</div>
<script>window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": "", "bdMini": "1", "bdMiniList": false, "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {} }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'https://csdnimg.cn/static/api/js/share.js?v=89860594'];</script>
<script>
    var recommendCount = 10;
    recommendCount = recommendCount > 1 ? (recommendCount + (recommendCount>6 ? 2 : 1)) : recommendCount;
    var articleTit = "设计模式学习之访问者模式";
    var ChannelId = 1;
    var articleId = "70537203";
    var commentscount = 7;
    var islock = false;
    var curentUrl = "https://blog.csdn.net/u012124438/article/details/70537203";
    var myUrl = "https://my.csdn.net/";
    //1禁止评论，2正常
    var commentAuth = 2;
    //百度搜索
    var baiduKey = "%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%BF%E9%97%AE%E8%80%85";
    var needInsertBaidu = true;
    // 代码段样式
    var codeStyle = '';
    var highlight = ["\u8bbe\u8ba1\u6a21\u5f0f","\u5b66\u4e60","\u8bbf\u95ee\u8005\u6a21\u5f0f"];//高亮数组
</script>
<script src="https://csdnimg.cn/public/sandalstrap/1.3/js/sandalstrap.min.js"></script>
<script src="https://csdnimg.cn/release/phoenix/vendor/pagination/paging.js"></script>
<script src='https://csdnimg.cn/public/common/gotop/js/goTop-v1.0.min.js?v201803151422'></script>
<script>
    GoTop({
        right: 8,
        hasReport: true,
        reportFun: function() {
            showReport(false,"设计模式学习之访问者模式");
        }
    })
</script>
<script src="https://csdnimg.cn/release/phoenix/template/js/common-a4f198c74c.min.js"></script>
<script src="https://csdnimg.cn/release/phoenix/template/js/detail-cdbb97e217.min.js"></script>
<script src="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-46c7bd3d86.min.js"></script>
<script src="https://csdnimg.cn/search/baidu_search-1.1.2.js?v=201802071056&autorun=true&install=true&keyword=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%BF%E9%97%AE%E8%80%85"  type="text/javascript"></script>
</body>
<div class="box-box-aways">
    <a class="btn-remove">
        关闭
    </a>
    <div id="adAways">
        <script>
            (function() {
            (window.slotbydup=window.slotbydup || []).push({
            id: '5868728',
            container: 'adAways',
            size: '250,500',
            display: 'inlay-fix'
            });
            })();
            </script>
        <script src="https://dup.baidustatic.com/js/os.js"></script>
    </div>
</div>
<div class="box-box-default">
    <a class="btn-remove">
        关闭
    </a>
    <script type="text/javascript" src="//cee1.iteye.com/mhzzjepzz.js"></script>
</div>
<div class="box-box-large">
    <a class="btn-remove">
        关闭
    </a>
    <script type="text/javascript" src="//cee1.iteye.com/idvveasfs.js"></script>
</div>
<!-- 第四范式SDK -->
<script charset="utf-8" src="https://nbrecsys.4paradigm.com/resource/js/sdk-csdn-smallflow.prod.0723.js" async defer></script>

<!-- 高亮未与 markdown兼容  -->
</html>